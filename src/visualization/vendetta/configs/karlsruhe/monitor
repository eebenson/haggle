# Parser for logevents from monitor nodes
<MONITORED_NETWORK>
	vendetta.monitored_network.wisenet.Wisenet
</MONITORED_NETWORK>

<PORT>
	4444
</PORT>

<BUFFERSIZE>
	0
</BUFFERSIZE>

<BGCOLOR>
	255
</BGCOLOR>


<PROXY>
	address=192.168.15.201
	port_up=5000
	port_down=5051
</PROXY>

<TABLECOLUMN>
	Alive
	Active
	Node name
	Rime address
	Node number
	Sensor host
</TABLECOLUMN>

<CANVAS>
	vendetta.visualization.canvases.FloorCanvas
</CANVAS>

#<NODECMD>
#	label=Start vclient
#	type=EXEC
#	msg=ssh root@<NODE_HOSTNAME> cd /var/wisenet/nodes/<NODE_NAME>/ && vclient --daemon
#</NODECMD>

#<NODECMD>
#	label=Stop vclient
#	type=EXEC
#	msg=ssh root@<NODE_HOSTNAME> kill -SIGTERM `cat /var/wisenet/nodes/<NODE_NAME>/run/vclient.pid`
#</NODECMD>

<NODECMD>
	label=Toggle vclient debug output
	type=EXEC
	msg=ssh root@<NODE_HOSTNAME> kill -SIGUSR1 `cat /var/wisenet/nodes/<NODE_NAME>/run/vclient.pid`
</NODECMD>

#<NODECMD>
#	label=Reconfigure vclient ...
#	type=EXEC
#	msg=scripts/wisenet/set_vclient_if.sh <ARGS> <NODE_HOSTNAME>
#</NODECMD>

<NODECMD>
	label=Push connectivity demo
	type=EXEC
	msg=scripts/wisenet/push_ibc-energest.sh <NODE_HOSTNAME> <NODE_NAME>
</NODECMD>

<NODECMD>
	label=Push clap demo (client)
	type=EXEC
	msg=scripts/wisenet/push_clap_client-tmote.sh <NODE_HOSTNAME> <NODE_NAME> <NODE_ID>
</NODECMD>

<NODECMD>
	label=Push clap demo (mic)
	type=EXEC
	msg=scripts/wisenet/push_clap_basestation.sh <NODE_HOSTNAME> <NODE_NAME> <NODE_ID>
</NODECMD>

<NODECMD>
	label=Set symbols and copy ... (TinyOS)
	type=EXEC
	msg=scripts/wisenet/set_symbols_and_copy <NODE_ID> <ARGS> root@<NODE_HOSTNAME>:/var/wisenet/nodes/<NODE_NAME>/imgs
</NODECMD>

<NODECMD>
	label=Just copy ... (Contiki)
	type=EXEC
	msg=scp <ARGS> root@<NODE_HOSTNAME>:/var/wisenet/nodes/<NODE_NAME>/imgs/
</NODECMD>

<NODECMD>
	label=Program node ...
	type=EXEC
	msg=ssh root@<NODE_HOSTNAME> cd /var/wisenet/nodes/<NODE_NAME>/ && ./program imgs/<ARGS>
</NODECMD>

<TESTBEDCMD>
	label=Listen to serial (115200 baud)
	type=TCP
	msg=CTRL_NET_UP_REQ args=-b115200 args=./tty
</TESTBEDCMD>

<TESTBEDCMD>
	label=Listen to serial (57600 baud)
	type=TCP
	msg=CTRL_NET_UP_REQ args=-b57600 args=./tty
</TESTBEDCMD>

<TESTBEDCMD>
	label=Stop listening
	type=TCP
	msg=CTRL_NET_DOWN_REQ
</TESTBEDCMD>

<TESTBEDCMD>
	label=Power up
	type=EXEC
	msg=ssh root@<NODE_HOSTNAME> cd /var/wisenet/nodes/<NODE_NAME>/ && ./power up
</TESTBEDCMD>

<TESTBEDCMD>
	label=Power down
	type=EXEC
	msg=ssh root@<NODE_HOSTNAME> cd /var/wisenet/nodes/<NODE_NAME>/ && ./power down
</TESTBEDCMD>

<TESTBEDCMD>
	label=Reset
	type=EXEC
	msg=ssh root@<NODE_HOSTNAME> cd /var/wisenet/nodes/<NODE_NAME>/ && ./reset
</TESTBEDCMD>

<TESTBEDCMD>
	label=Start vclient
	type=EXEC
	msg=scripts/wisenet/start_vclient.sh <NODE_HOSTNAME> <NODE_NAME>
</TESTBEDCMD>

<TESTBEDCMD>
	label=Stop vclient
	type=EXEC
	msg=scripts/wisenet/stop_vclient.sh <NODE_HOSTNAME>
</TESTBEDCMD>

<LOGFILTER>
	Put Started:LE_PUT_STARTED
	Put Forwarded:LE_PUT_FORWARD
	Put Delivered:LE_PUT_DELIVERED
	Got Key from Root:LE_GOT_KEY_FROM_ROOT
	num Stored Keys:LE_STORED_KEYS
</LOGFILTER>

<SCPCOMMAND>
	scp -r frederik@<NODE_HOSTNAME>:/home/uppsala_kademlia/vclient/logs ./nodelogs/<NODE_HOSTNAME>
</SCPCOMMAND>

<SSHCOMMAND>
	xterm -e 'ssh -t -l root <NODE_HOSTNAME>'
</SSHCOMMAND>

#<SSHCOMMAND_SHOWLOG>
#	xterm -T 'vclient output on <NODE_HOSTNAME>' -e 'ssh -t -l root <NODE_HOSTNAME> tail -f /var/log/vclient.log'
#</SSHCOMMAND_SHOWLOG>

<NODEFILE>
	nodes.txt
</NODEFILE>
